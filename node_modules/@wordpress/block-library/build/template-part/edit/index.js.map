{"version":3,"sources":["@wordpress/block-library/src/template-part/edit/index.js"],"names":["TemplatePartEdit","attributes","slug","theme","tagName","TagName","setAttributes","clientId","templatePartId","select","getBlocks","entityRecord","getEntityRecord","innerBlocks","isResolved","blockProps","isPlaceholder","inspectorAdvancedControls","label","value","isOpen","onToggle","chevronUp","chevronDown","onClose","length"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tBlockControls,\n\tInspectorAdvancedControls,\n\tuseBlockProps,\n} from '@wordpress/block-editor';\nimport {\n\tSelectControl,\n\tDropdown,\n\tToolbarGroup,\n\tToolbarButton,\n\tSpinner,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { chevronUp, chevronDown } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport TemplatePartNamePanel from './name-panel';\nimport TemplatePartInnerBlocks from './inner-blocks';\nimport TemplatePartPlaceholder from './placeholder';\nimport TemplatePartSelection from './selection';\n\nexport default function TemplatePartEdit( {\n\tattributes: { slug, theme, tagName: TagName = 'div' },\n\tsetAttributes,\n\tclientId,\n} ) {\n\tconst templatePartId = theme + '//' + slug;\n\n\t// Set the postId block attribute if it did not exist,\n\t// but wait until the inner blocks have loaded to allow\n\t// new edits to trigger this.\n\tconst { isResolved, innerBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlocks } = select( 'core/block-editor' );\n\t\t\tconst entityRecord =\n\t\t\t\ttheme && slug\n\t\t\t\t\t? select( 'core' ).getEntityRecord(\n\t\t\t\t\t\t\t'postType',\n\t\t\t\t\t\t\t'wp_template_part',\n\t\t\t\t\t\t\ttheme + '//' + slug\n\t\t\t\t\t  )\n\t\t\t\t\t: null;\n\n\t\t\treturn {\n\t\t\t\tinnerBlocks: getBlocks( clientId ),\n\t\t\t\tisResolved: !! entityRecord,\n\t\t\t};\n\t\t},\n\t\t[ templatePartId, clientId ]\n\t);\n\n\tconst blockProps = useBlockProps();\n\tconst isPlaceholder = ! slug;\n\n\tconst inspectorAdvancedControls = (\n\t\t<InspectorAdvancedControls>\n\t\t\t<SelectControl\n\t\t\t\tlabel={ __( 'HTML element' ) }\n\t\t\t\toptions={ [\n\t\t\t\t\t{ label: __( 'Default (<div>)' ), value: 'div' },\n\t\t\t\t\t{ label: '<header>', value: 'header' },\n\t\t\t\t\t{ label: '<main>', value: 'main' },\n\t\t\t\t\t{ label: '<section>', value: 'section' },\n\t\t\t\t\t{ label: '<article>', value: 'article' },\n\t\t\t\t\t{ label: '<aside>', value: 'aside' },\n\t\t\t\t\t{ label: '<footer>', value: 'footer' },\n\t\t\t\t] }\n\t\t\t\tvalue={ TagName }\n\t\t\t\tonChange={ ( value ) => setAttributes( { tagName: value } ) }\n\t\t\t/>\n\t\t</InspectorAdvancedControls>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ inspectorAdvancedControls }\n\t\t\t<TagName { ...blockProps }>\n\t\t\t\t{ isPlaceholder && (\n\t\t\t\t\t<TemplatePartPlaceholder\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\tinnerBlocks={ innerBlocks }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ! isPlaceholder && isResolved && (\n\t\t\t\t\t<BlockControls>\n\t\t\t\t\t\t<ToolbarGroup className=\"wp-block-template-part__block-control-group\">\n\t\t\t\t\t\t\t<TemplatePartNamePanel postId={ templatePartId } />\n\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\tclassName=\"wp-block-template-part__preview-dropdown-button\"\n\t\t\t\t\t\t\t\tcontentClassName=\"wp-block-template-part__preview-dropdown-content\"\n\t\t\t\t\t\t\t\tposition=\"bottom right left\"\n\t\t\t\t\t\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\tisOpen ? chevronUp : chevronDown\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Choose another' ) }\n\t\t\t\t\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\t\t\t\t\t// Disable when open to prevent odd FireFox bug causing reopening.\n\t\t\t\t\t\t\t\t\t\t// As noted in https://github.com/WordPress/gutenberg/pull/24990#issuecomment-689094119 .\n\t\t\t\t\t\t\t\t\t\tdisabled={ isOpen }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trenderContent={ ( { onClose } ) => (\n\t\t\t\t\t\t\t\t\t<TemplatePartSelection\n\t\t\t\t\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t</BlockControls>\n\t\t\t\t) }\n\t\t\t\t{ ! isPlaceholder && isResolved && (\n\t\t\t\t\t<TemplatePartInnerBlocks\n\t\t\t\t\t\tpostId={ templatePartId }\n\t\t\t\t\t\thasInnerBlocks={ innerBlocks.length > 0 }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ! isPlaceholder && ! isResolved && <Spinner /> }\n\t\t\t</TagName>\n\t\t</>\n\t);\n}\n"]}